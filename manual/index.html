<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Installation | Gaming Couch | 0.0.1 </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Installation | Gaming Couch | 0.0.1 ">
      
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="../toc.html">
      
      <meta name="docfx:rel" content="../">
      <meta name="docfx:disablenewtab" content="true">
      
      <meta name="docfx:docurl" content="https://github.com/deadsetbit/gaming-couch-unity/blob/main/Documentation~/manual/index.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="landing" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">

<p>Unity integration for Gaming Couch platform.</p>
<hr>
<h1 id="installation">Installation</h1>
<p>You can import this package by using Unity's <em>Package manager's</em> import from git URL.</p>
<p>Follow the integration steps below to get started.</p>
<h1 id="configure-the-editor">Configure the Editor</h1>
<ul>
<li>From <em>Build Settings</em>, switch the platform to &quot;WebGL&quot;</li>
<li>fix the game window to 16:9 (from top of the Game window), as the platform is fixed to 16:9 aspect ratio</li>
</ul>
<h1 id="basic-integration">Basic integration</h1>
<h2 id="1-add-gamingcouch-game-object">1) Add GamingCouch game object</h2>
<p>Add GamingCouch game object to your main scene by right clicking the scene hierarchy and selecting &quot;GamingCouch&quot; from the menu.</p>
<h2 id="2-create-and-link-game-script">2) Create and link game script</h2>
<ul>
<li>(for new game project) create &quot;Game&quot; game object to the main scene and create and add &quot;Game.cs&quot; main game script to it</li>
<li>link your main game object to the &quot;Listener&quot; field in the GamingCouch game object (via inspector)
<ul>
<li>now the game script will be able hook up to GamingCouch specific messages (we will get back to this)</li>
</ul>
</li>
</ul>
<h2 id="3-create-and-link-player-prefab">3) Create and link player prefab</h2>
<ul>
<li>(for new game project) create &quot;Player&quot; prefab and create and add &quot;Player.cs&quot; script to it</li>
<li>make your player script extend DSB.GC.GCPlayer (instead of MonoBehaviour)</li>
<li>link the player prefab to the &quot;Player Prefab&quot; field in GamingCouch game object (via inspector)</li>
</ul>
<h2 id="4-hook-up-your-main-game-script">4) Hook up your main game script</h2>
<h3 id="define-player-store-in-your-main-game-script">Define player store in your main game script</h3>
<pre><code class="lang-C#">// Use GamingCouch:
using DSB.GC;

// Add new field for playerStore. Replace the &quot;Player&quot; with your player script name, if it differs:
private GCPlayerStore&lt;Player&gt; playerStore = new GCPlayerStore&lt;Player&gt;();
</code></pre>
<h3 id="listen-for-gamingcouchsetup-message">Listen for GamingCouchSetup message</h3>
<p>This is the place where you can start to load levels and what not based on the GCSetupOptions:</p>
<pre><code class="lang-C#">private void GamingCouchSetup(GCSetupOptions options)
{
    // do stuff based on the options. Eg. load level based on game mode etc.

    // after setup is done call:
    GamingCouch.Instance.SetupDone();
}
</code></pre>
<p>Next we need to listen when GC and all the players are ready to play:</p>
<pre><code class="lang-C#">private void GamingCouchPlay(GCPlayOptions options)
{
    // we now have all the successfully loaded players so we can instantiate them.
    // This will instantiate and config the players by using the player prefab linked to GamingCouch game object
    GamingCouch.Instance.InstantiatePlayers(playerStore, options.players, Vector3.up * 100, Quaternion.identity);

    // Setup the game and HUD based on the game/game mode
    GamingCouch.Instance.SetupGameVersus(
        new GCGameVersusSetupOptions()
        {
            // Adjust the placement sorting criteria to fit your game.
            // You can add/remove or change the order of the components.
            // NOTE: In order for the placement criteria to work, you need
            // to use the GCPlayer methods, such as SetEliminated, SetScore/AddScore, SetFinished.
            placementCriteria = new GCPlacementSortCriteria[] {
                GCPlacementSortCriteria.EliminatedDescending,
                GCPlacementSortCriteria.ScoreDescending,
                GCPlacementSortCriteria.Finished
            },

            // configure the HUD, see more on the HUD section
            hud = new GCGameHudOptions()
            {
                players = new GCHudPlayersConfig(),
                // this is by default true, but can be set to false if Players HUD needs to be controlled manually
                isPlayersAutoUpdateEnabled = true,
            }
        }
    );

    // next we can set the game to play mode and or play intro
    StartMyGameNow();
}
</code></pre>
<p>When the game ends, simply call:</p>
<pre><code class="lang-C#">GamingCouch.Instance.GameOver();
</code></pre>
<h1 id="hud">HUD</h1>
<p>NOTE: All HUD related features are only rendered in the Gaming Couch platform and cant be tested in the editor or unity build alone.</p>
<h2 id="name-tags">Name tags</h2>
<p>To add name tags for players, you need to add GCNameTag component to your player game object.
Usually you want to position the name tag to be above the player, so you can also add the GCNameTag component
to child object of the player game object and offset it to be above the player's head for example.</p>
<p>NOTE: Currently, there is no way to show the name tags in the editor or unity build alone.
The only way to see if the name tags are working correctly is to test it in the Gaming Couch platform.</p>
<h2 id="configure-players-hud-to-display-score-lives-etc">Configure Players HUD to display score, lives etc.</h2>
<h3 id="display-score">Display score</h3>
<pre><code class="lang-C#">GamingCouch.Instance.SetupGameVersus(
    new GCGameVersusSetupOptions()
    {
        maxScore = 10, // required to display the score in HUD
        hud = new GCGameHudOptions()
        {
            players = new GCHudPlayersConfig()
            {
                valueTypeEnum = PlayersHudValueType.PointsSmall
                ...
            }
            ...
        }
        ...
    }
);
</code></pre>
<p>Now the hud is set to reflect the player score that is set by GCPlayer.SetScore or GCPlayer.AddScore.</p>
<p>// TODO: Examples for all the value types, and how to update them</p>
<p>To see other HUD value types, see <a href="https://deadsetbit.github.io/gaming-couch-unity/api/DSB.GC.Hud.GCHudPlayersConfig.html#DSB_GC_Hud_GCHudPlayersConfig_valueTypeEnum">API documentation for GCHudPlayersConfig</a>.</p>
<h2 id="manually-update-the-players-hud">Manually update the Players HUD</h2>
<p>NOTE: You need to disable the auto update in the SetupGame's GCGameHudOptions to manually update the Players HUD!</p>
<pre><code class="lang-C#">using System.Linq;
using DSB.GC.Hud;

GamingCouch.Instance.Hud.UpdatePlayers(new GCPlayersHudData
{
    players = playerStore.Players.Select(player =&gt; new GCPlayersHudDataPlayer
    {
        playerId = player.Id, // The GamingCouch player id
        eliminated = player.IsEliminated,
        placement = 0, // The placement of the player to sort the players HUD by
        value = &quot;&quot;; // The value to display in the HUD. Set depending on the value type set in the GCGameHudOptions
    }).ToArray()
});
</code></pre>
<h1 id="player-integration">Player integration</h1>
<h2 id="configure-player">Configure player</h2>
<p>When the player is instantiated by GamingCouch some properties are available, such as Gaming Couch player id, color and name.</p>
<p>For all available properties, see the <a href="https://deadsetbit.github.io/gaming-couch-unity/api/DSB.GC.GCPlayer.html#DSB_GC_GCPlayer_value">API documentation for GCPlayer</a>.</p>
<p>The values are available on your player script instance on Start (note that they are not yet available on Awake!):</p>
<pre><code class="lang-C#">public class Player : GCPlayer
{
    ...

    private void Start()
    {
        GetComponent&lt;SpriteRenderer&gt;().color = ColorBase;
    }

    ...
}
</code></pre>
<h2 id="player-inputs">Player inputs</h2>
<p>Read and apply the player inputs in your main game script Update method:</p>
<pre><code class="lang-C#">private void Update()
{
    foreach (var player in playerStore.Players)
    {
        var inputs = GamingCouch.Instance.GetInputsByPlayerId(player.Id);
        if (inputs == null) continue;

        player.PlayerController.Move(inputs.leftX);
        player.PlayerController.Jump(inputs.primary);
    }
}
</code></pre>
<h1 id="player-placement">Player placement</h1>
<p>You do not need to sort the players, just define correct placement criteria in the SetupGame call (see above)
and use the GCPlayer methods to set the player state (eliminated, score, finished):</p>
<pre><code class="lang-C#">// Set player eliminated
player.SetEliminated(&quot;Out of bounds&quot;);

// Set player score
player.SetScore(0, &quot;Dropped all coins&quot;);
// ...or add score
player.AddScore(1, &quot;Collected a coin&quot;);
// ...or subtract score
player.SubtractScore(2, &quot;Pushed off the edge&quot;);

// Set player finished
player.SetFinished(&quot;Finish line&quot;);
</code></pre>
<h1 id="player-colors">Player colors</h1>
<p>Access different player color variants directly via the GCPlayer instance:</p>
<pre><code class="lang-C#">GCPlayer.ColorBase
GCPlayer.ColorDark
GCPlayer.ColorLight
GCPlayer.ColorOffWhite
</code></pre>
<h1 id="build-your-project-for-gaming-couch">Build your project for Gaming Couch</h1>
<p>When you are ready to build your project for Gaming Couch, you need to build it as WebGL. You can change this by selecting the WebGL tab from
&quot;Project Settings &gt; Player&quot;.</p>
<p>Under &quot;Project Settings &gt; Player &gt; WebGL&quot; tab's &quot;Publish settings&quot;, set the compression format to &quot;Disabled&quot;.</p>
<p>// TODO: Further instructions on how to build the project for Gaming Couch and integrate it to the platform.</p>
<h1 id="what-next">What next?</h1>
<ul>
<li>Explore our example template game project: <a href="https://github.com/deadsetbit/gaming-couch-unity-template">Gaming Couch Unity Template</a></li>
<li>Dive into the <a href="https://deadsetbit.github.io/gaming-couch-unity/api">API documentation</a></li>
</ul>
<h1 id="creating-unity-project-from-scratch">Creating Unity project from scratch</h1>
<p>If you do not want to use our <a href="https://github.com/deadsetbit/gaming-couch-unity-template">Gaming Couch Unity Template</a>,
you can create project from scratch by following these steps:</p>
<ul>
<li>create new unity project with the &quot;Universal 3D&quot; template (URP) or optionally &quot;Universal 2D&quot; (URP)</li>
<li>follow the <a href="#installation">installation and integration steps</a></li>
</ul>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/deadsetbit/gaming-couch-unity/blob/main/Documentation~/manual/index.md/#L1" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made by <a href="https://github.com/deadsetbit" target="_blank">deadsetbit</a> using <a href="https://dotnet.github.io/docfx" target="_blank">DocFX</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
